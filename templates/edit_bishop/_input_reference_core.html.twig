{% set base_id_ref=base_id~'_ref_'~current_idx %}
{% set base_input_name_ref=base_input_name~'[ref]['~current_idx~']' %}
{% if ref is not defined %}
    {% set ref = {
	id: "",
	referencevolume: null,
	volumetitleshort: "",
	page: "",
	idinreference: "",
    } %}
{% endif %}
<div class="input-group input-group-sm">
    <button class="btn btn-outline-secondary btn-sm"
	    type="button"
	    data-insert-id="{{ base_id_ref }}_insertPoint"
	    data-action="insert#insertLocal"
	    data-url="{{ path('edit_bishop_new_reference') }}"><img src="{{ asset('images/symbols/plus-square.svg') }}" alt="Plus"></button>
    <span class="input-group-text">Band</span>
    {# id (hidden) #}
    <input type="text"
	   id="{{ base_id_ref }}_id"
	   name="{{ base_input_name_ref }}[id]"
	   class="form-control form-control-sm d-none"
	   value="{{ ref.id }}">
    <div class="w-25"
    	 {{ stimulus_controller('autocomplete', {
	     url: path('person_suggest', { field: 'titleShort', itemTypeId: itemTypeId }),
	 }) }}>
 	<input type="text" id="{{ base_id_ref }}_volume"
	       name="{{ base_input_name_ref}}[volume]"
	       class="form-control form-control-sm wiag-input"
	       value="{% if ref.volumetitleshort %}{{ ref.volumetitleshort }}{% elseif ref.referencevolume %}{{ ref.referencevolume.titleshort }}{% endif %}"
	       spellcheck="false"
	       aria-label="Band"
	       data-autocomplete-target="input">
	<ul class="list-group autocomplete-target"
	    data-autocomplete-target="results"
	    style="max-width: 18rem;"></ul>
    </div>
    <span class="input-group-text">Seite</span>
    <input type="text" id="{{ base_id_ref }}_page"
	   name="{{ base_input_name_ref}}[page]"
	   class="form-control form-control-sm wiag-input"
	   value="{{ ref.page }}"
	   spellcheck="false"
	   aria-label="Band">
    <span class="input-group-text">ID/Nr.</span>
    <input type="text" id="{{ base_id_ref }}_idInReference"
	   name="{{ base_input_name_ref}}[idInReference]"
	   class="form-control form-control-sm wiag-input"
	   value="{{ ref.idinreference }}"
	   spellcheck="false"
	   aria-label="Id/Nummer">
    {# delete #}
    <div class="form_check ms-1 mt-1 align-middle">
	<input class="form-check-input"
	       type="checkbox"
	       value=""
	       id="{{ base_id_ref }}_delete"
	       name="{{ base_input_name_ref }}[delete]"
	       data-action="input-state#toggle"
	       data-input-state-target="checkbox">
	<label class="form-check-label ms-1" for="{{ base_id_ref }}_delete">lÃ¶schen</label>
    </div>
</div>
