{% set intern_collapsable=false %}
{% set itemTypeId=constant('App\\Entity\\Item::ITEM_TYPE_ID')['Bischof']['id'] %}
{% set base_id=editFormId~'_'~index %}
{% set base_input_name=editFormId~'['~index~']' %}
{# header #}
{% set online_image = (person.item.editstatus == 'fertig') ? 'images/symbols/square-fill-online.svg' : 'images/symbols/square-fill-not-online.svg' %}
<div class="container-fluid p-2 my-2 border border-2 border-success rounded"
     id="{{ base_id }}">
    <div data-controller="toggle-arrow on-input insert auth-search"
	 data-toggle-arrow-state-value="true"
	 data-toggle-arrow-img-open-value="down"
	 data-toggle-arrow-img-closed-value="right"
	 data-action="shown.bs.collapse->toggle-arrow#shown hidden.bs.collapse->toggle-arrow#hidden input->on-input#mark">
	{% set expanded = person.hasError('info') or person.item.formIsExpanded %}
	{# headline with collapse button#}
	{{ include('edit_bishop/_item_headline.html.twig') }}
	{# body #}
	<div class="collapse multi-collapse {% if expanded %}show{% endif %} pe-0"
	     data-controller="sync"
	     data-action="shown.bs.collapse->sync#check hidden.bs.collapse->sync#uncheck"
	     id={{ "body#{person.item.id}" }}>
	    {# status and name #}
	    {{ include('edit_bishop/_input_status.html.twig') }}
	    {{ include('edit_bishop/_input_name.html.twig') }}
	    <hr class="my-2 border border-secondary border-2">
	    {# roles #}
	    {# - using surrounding div with class="overflow-auto" is not compatible with auto-complete #}
	    {{ include('edit_bishop/_input_role_list.html.twig') }}
	    <hr class="my-2 border border-secondary border-2">
	    {# references #}
	    {{ include('edit_bishop/_input_reference_list.html.twig') }}
	    <hr class="mt-1 mb-2 border border-secondary border-2">
	    {# norm data and external references #}
	    {{ include('edit_bishop/_input_id_external_list.html.twig') }}
	    {# comment person #}
	    <div class="row">
		<div class="col-12">
		    <div class="input-group input-group-sm">
			<span class="input-group-text wiag-bg-internal" style="min-width: 12rem">Kommentar (red.)</span>
			<textarea id="{{ base_id }}_comment"
				  style="height: 3rem"
				  name="{{ base_input_name }}[comment]"
				  class="form-control form-control-sm wiag-input">{{ person.comment }}</textarea>
		    </div>
		</div>
	    </div>
	    {% if person.item.idPublic %}
		{% set user=userWiagRepository.find(person.item.changedby) %}
		<div class="row">
		    <div class="col-12">
			<span class="ms-1">{{ person.item.idPublic }}</span>
			<span class="wiag-log text-nowrap float-end me-1">ge√§ndert: {{ person.item.datechanged|format_datetime() }}{% if user %}, {{ user.email }}{% endif %}</span>
		    </div>
		</div>
	    {% endif %}
	</div>
    </div>
</div>
