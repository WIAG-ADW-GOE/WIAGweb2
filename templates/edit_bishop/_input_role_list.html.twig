<div data-controller="insert"
     data-insert-base-id-value="{{ base_id }}"
     data-insert-base-input-name-value="{{ base_input_name }}">
    {% for role in person.role|sort((a, b) => a.datesortkey <=> b.datesortkey) %}
	<div class="row"
	     data-controller="input-state">
	    {{ include('edit_bishop/_input_role.html.twig', {
		base_id: base_id,
		base_input_name: base_input_name,
		current_idx: loop.index0,
		is_last: loop.last,
	    }) }}
	</div>
    {% else %}
	<div class="row"
	     data-controller="input-state">
	    {{ include('edit_bishop/_input_role.html.twig', {
		base_id: base_id,
		base_input_name: base_input_name,
		current_idx: 0,
		is_last: true
	    }) }}
	</div>
    {% endfor %}
    <div class="row d-none"
	 data-controller="input-state"
	 data-insert-target="template">
	{{ include('edit_bishop/_input_role.html.twig', {
	    base_id: base_id,
	    base_input_name: base_input_name,
	    current_idx: 'xxx',
	    is_last: true
	}) }}
    </div>

</div>
{% for error_obj in person.inputError|filter(v => v.section == 'role') %}
    <div class="row">
	{% set text_attr=error_obj.level == 'error' ? "text-danger" : "text-warning" %}
	<div class="col-12 {{ text_attr }}">{{ error_obj.msg }}</div>
    </div>
{% endfor %}
